"use strict";(self.webpackChunkThe_Circus=self.webpackChunkThe_Circus||[]).push([[445],{2445:(I,d,c)=>{c.r(d),c.d(d,{LiveModule:()=>J});var h=c(6895),x=c(8954),u=c(5649),t=c(8256),a=c(7139);let _=(()=>{class i{constructor(e,o,n){this.route=e,this.router=o,this.eventService=n}ngOnInit(){this.route.params.subscribe(e=>{this.eventService.loadEvent(e.id).subscribe({next:()=>{},error:o=>{404===o.status&&this.router.navigate(["/black-hole/404"]).then()}})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(a.y3))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-live"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.lC],encapsulation:2}),i})();var r=c(892),g=c(4624),v=c(6613),m=c(4426),f=c(7093),C=c(8754);function y(i,l){1&i&&(t.TgZ(0,"ul",3),t._UZ(1,"li")(2,"li")(3,"li")(4,"li")(5,"li")(6,"li")(7,"li")(8,"li")(9,"li")(10,"li"),t.qZA())}function D(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"app-carousel",8),t.NdJ("lastScrolledPhoto",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.getCarouselData(n))}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("files",e.files)}}function b(i,l){if(1&i&&(t.TgZ(0,"div",6)(1,"h2"),t._uU(2),t.qZA(),t._UZ(3,"app-poll-chart",9),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(null==e.pollLiveData.currentPoll?null:e.pollLiveData.currentPoll.question),t.xp6(1),t.Q6J("poll",e.pollLiveData.currentPoll)("results",e.pollLiveData.currentPollResults)("maxResultsLive",7)}}function P(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",4),t.YNc(1,D,2,1,"div",5),t.YNc(2,b,4,4,"div",5),t.TgZ(3,"div",6)(4,"app-current-status",7),t.NdJ("currentActivityChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.currentActivityChange(n))}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.liveScreenConfiguration.main_block==e.liveScreenTypes.CAROUSEL),t.xp6(1),t.Q6J("ngIf",e.pollLiveData&&e.liveScreenConfiguration.main_block==e.liveScreenTypes.POLL),t.xp6(2),t.Q6J("showActivitiesActions",!1)("activities",e.event.activities)("eventDate",e.event.start_datetime)}}let S=(()=>{class i{constructor(e,o,n,s){this.eventService=e,this.galleryService=o,this.pollService=n,this.liveService=s,this.liveScreenTypes=a.gV,this.liveScreenConfiguration=a.hA,this.background=r.z,this.backgroundSubscription=null}ngOnInit(){this.eventService.getEvent(this.eventService.eventCode).subscribe({next:e=>{this.event=e}}),this.getCarouselData(),this.liveService.backgroundSubject.subscribe({next:e=>{this.background=e}})}ngOnDestroy(){this.backgroundSubscription&&this.backgroundSubscription.unsubscrive()}currentActivityChange(e){this.currentActivity=e,this.liveScreenConfiguration=this.currentActivity.live_configuration,this.liveScreenConfiguration.lights?this.backgroundSubscription=this.liveService.subscribeBackground():(this.backgroundSubscription&&this.backgroundSubscription.unsubscrive(),this.background=r.z),this.liveScreenConfiguration.main_block==this.liveScreenTypes.POLL?(this.getPollData(),this.currentPollSubscription=setInterval(()=>{this.getPollData()},5e3)):(this.currentPollSubscription&&this.currentPollSubscription.unsubscrive(),this.pollLiveData.currentPoll=null,this.pollLiveData.currentPollResults=[])}getPollData(){this.pollService.getPoll(this.eventService.eventCode).subscribe({next:e=>{this.pollLiveData=this.pollService.getPollData(e)}})}getCarouselData(e){this.galleryService.getFiles(this.eventService.eventCode).subscribe({next:o=>{const n=o.results;if(n&&e){const s=n.findIndex(p=>p.id===e.id);s>0&&(this.files=n.slice(0,s)),-1==s&&(this.files=n)}else this.files=n}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(a.y3),t.Y36(g.j),t.Y36(v.X),t.Y36(r.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["display-a-live"]],decls:3,vars:4,consts:[[1,"vh-100","d-flex","align-items-center"],["class","circles",4,"ngIf"],["class","container",4,"ngIf"],[1,"circles"],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[3,"showActivitiesActions","activities","eventDate","currentActivityChange"],[1,"col","text-center","mx-auto",3,"files","lastScrolledPhoto"],[3,"poll","results","maxResultsLive"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.YNc(1,y,11,0,"ul",1),t.YNc(2,P,5,5,"div",2),t.qZA()),2&e&&(t.Udp("background",o.background.color),t.xp6(1),t.Q6J("ngIf",o.liveScreenConfiguration.lights),t.xp6(1),t.Q6J("ngIf",o.event))},dependencies:[h.O5,m.C,f.J,C.F],styles:[".circles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;display:block;list-style:none;width:20px;height:20px;background:rgba(255,255,255,.4);animation:animate 25s linear infinite;bottom:-150px}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:25%;width:80px;height:80px;animation-delay:0s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:10%;width:20px;height:20px;animation-delay:2s;animation-duration:12s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:70%;width:20px;height:20px;animation-delay:4s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-delay:0s;animation-duration:18s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:65%;width:20px;height:20px;animation-delay:0s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:75%;width:110px;height:110px;animation-delay:3s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:35%;width:150px;height:150px;animation-delay:7s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:50%;width:25px;height:25px;animation-delay:15s;animation-duration:45s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:20%;width:15px;height:15px;animation-delay:2s;animation-duration:35s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:85%;width:150px;height:150px;animation-delay:0s;animation-duration:11s}@keyframes animate{0%{transform:translateY(0) rotate(0);opacity:1;border-radius:0}to{transform:translateY(-1000px) rotate(720deg);opacity:0;border-radius:50%}}"]}),i})();var M=c(4623),O=c(4442);function A(i,l){1&i&&(t.TgZ(0,"ul",3)(1,"li")(2,"p",4),t._uU(3,"\u{1f923}"),t.qZA()(),t.TgZ(4,"li"),t._uU(5,"\u{1f923}"),t.qZA(),t.TgZ(6,"li"),t._uU(7,"\u{1f923}"),t.qZA(),t.TgZ(8,"li"),t._uU(9,"\u{1f923}"),t.qZA(),t.TgZ(10,"li"),t._uU(11,"\u{1f923}"),t.qZA(),t.TgZ(12,"li"),t._uU(13,"\u{1f923}"),t.qZA(),t.TgZ(14,"li"),t._uU(15,"\u{1f923}"),t.qZA(),t.TgZ(16,"li"),t._uU(17,"\u{1f923}"),t.qZA(),t.TgZ(18,"li"),t._uU(19,"\u{1f923}"),t.qZA(),t.TgZ(20,"li"),t._uU(21,"\u{1f923}"),t.qZA()())}function T(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"app-carousel",14),t.NdJ("lastScrolledPhoto",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.getCarouselData(n))}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("files",e.files)}}function Z(i,l){if(1&i&&(t.TgZ(0,"div",13)(1,"h2"),t._uU(2),t.qZA(),t._UZ(3,"app-poll-chart",15),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(null==e.pollLiveData.currentPoll?null:e.pollLiveData.currentPoll.question),t.xp6(1),t.Q6J("poll",e.pollLiveData.currentPoll)("results",e.pollLiveData.currentPollResults)("maxResultsLive",7)}}const L=function(){return{title:"Titolo canzone",artist:"Nome artista",imageUrl:"https://fastly.picsum.photos/id/304/300/300.jpg?hmac=G0uliBCivPslLUmoPIL5MvjxOfbM9nSZBMv5sYD-6DM"}};function k(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),t._UZ(4,"app-current-time"),t.qZA(),t.TgZ(5,"div",8)(6,"app-current-status",9),t.NdJ("currentActivityChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.currentActivityChange(n))}),t.qZA()(),t.TgZ(7,"div",8),t._UZ(8,"app-now-playing",10),t.qZA()(),t.TgZ(9,"div",11),t.YNc(10,T,2,1,"div",12),t.YNc(11,Z,4,4,"div",12),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("showActivitiesActions",!1)("activities",e.event.activities)("eventDate",e.event.start_datetime),t.xp6(2),t.Q6J("song",t.DdM(8,L))("currentTime","1:30")("remainingTime","3:30"),t.xp6(2),t.Q6J("ngIf",e.liveScreenConfiguration.main_block==e.liveScreenTypes.CAROUSEL),t.xp6(1),t.Q6J("ngIf",e.pollLiveData&&e.liveScreenConfiguration.main_block==e.liveScreenTypes.POLL)}}const U=[{path:":id",component:_,children:[{path:"a",component:S},{path:"b",component:(()=>{class i{constructor(e,o,n,s){this.eventService=e,this.galleryService=o,this.pollService=n,this.liveService=s,this.liveScreenTypes=a.gV,this.liveScreenConfiguration=a.hA,this.background=r.z,this.backgroundSubscription=null}ngOnInit(){this.eventService.getEvent(this.eventService.eventCode).subscribe({next:e=>{this.event=e}}),this.getCarouselData(),this.liveService.backgroundSubject.subscribe({next:e=>{this.background=e}})}ngOnDestroy(){this.backgroundSubscription&&this.backgroundSubscription.unsubscrive()}currentActivityChange(e){this.currentActivity=e,this.liveScreenConfiguration=this.currentActivity.live_configuration,this.liveScreenConfiguration.lights?this.backgroundSubscription=this.liveService.subscribeBackground():(this.backgroundSubscription&&this.backgroundSubscription.unsubscrive(),this.background=r.z),this.liveScreenConfiguration.main_block==this.liveScreenTypes.POLL?(this.getPollData(),this.currentPollSubscription=setInterval(()=>{this.getPollData()},5e3)):(this.currentPollSubscription&&this.currentPollSubscription.unsubscrive(),this.pollLiveData.currentPoll=null,this.pollLiveData.currentPollResults=[])}getPollData(){this.pollService.getPoll(this.eventService.eventCode).subscribe({next:e=>{this.pollLiveData=this.pollService.getPollData(e)}})}getCarouselData(e){this.galleryService.getFiles(this.eventService.eventCode).subscribe({next:o=>{const n=o.results;if(n&&e){const s=n.findIndex(p=>p.id===e.id);s>0&&(this.files=n.slice(0,s)),-1==s&&(this.files=n)}else this.files=n}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(a.y3),t.Y36(g.j),t.Y36(v.X),t.Y36(r.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["display-b-live"]],decls:3,vars:4,consts:[[1,"vh-100","d-flex","align-items-center"],["class","circles",4,"ngIf"],["class","container",4,"ngIf"],[1,"circles"],[1,"emoji-big"],[1,"container"],[1,"row","h-100"],[1,"col-3"],[1,"row"],[1,"mt-3",3,"showActivitiesActions","activities","eventDate","currentActivityChange"],[1,"mt-3",3,"song","currentTime","remainingTime"],[1,"col-9","m-auto"],["class","row align-items-center",4,"ngIf"],[1,"row","align-items-center"],[1,"col","text-center","mx-auto",3,"files","lastScrolledPhoto"],[3,"poll","results","maxResultsLive"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.YNc(1,A,22,0,"ul",1),t.YNc(2,k,12,9,"div",2),t.qZA()),2&e&&(t.Udp("background",o.background.color),t.xp6(1),t.Q6J("ngIf",o.liveScreenConfiguration.lights),t.xp6(1),t.Q6J("ngIf",o.event))},dependencies:[h.O5,m.C,f.J,M.C,C.F,O.s],styles:[".container[_ngcontent-%COMP%]{max-width:100%;width:100%;height:100%;padding:1em}.circles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;display:block;list-style:none;width:20px;height:20px;background:rgba(255,255,255,.4);animation:animate 25s linear infinite;bottom:-150px}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:25%;width:80px;height:80px;animation-delay:0s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:10%;width:20px;height:20px;animation-delay:2s;animation-duration:12s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:70%;width:20px;height:20px;animation-delay:4s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-delay:0s;animation-duration:18s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:65%;width:20px;height:20px;animation-delay:0s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:75%;width:110px;height:110px;animation-delay:3s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:35%;width:150px;height:150px;animation-delay:7s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:50%;width:25px;height:25px;animation-delay:15s;animation-duration:45s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:20%;width:15px;height:15px;animation-delay:2s;animation-duration:35s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:85%;width:150px;height:150px;animation-delay:0s;animation-duration:11s}@keyframes animate{0%{transform:translateY(0) rotate(0);opacity:1;border-radius:0}to{transform:translateY(-1000px) rotate(720deg);opacity:0;border-radius:50%}}"]}),i})()}]},{path:"",redirectTo:"a",pathMatch:"full"}];let Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(U),u.Bz]}),i})(),J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[h.ez,x.O,Y]}),i})()}}]);