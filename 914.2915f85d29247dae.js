"use strict";(self.webpackChunkThe_Circus=self.webpackChunkThe_Circus||[]).push([[914],{7914:(U,s,c)=>{c.r(s),c.d(s,{GalleryModule:()=>T});var p=c(6895),d=c(8954),a=c(9833),u=c(4530),e=c(8256);let m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-gallery"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2}),t})();var f=c(4624);function g(t,l){if(1&t&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"img",13),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src",n.previewImageSrc,e.LSH)}}function h(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",14)(1,"input",15),e.NdJ("change",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.onFileSelected(i))}),e.qZA()()}}function v(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",16)(1,"button",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.resetFile())}),e._uU(2,"Remove"),e.qZA(),e.TgZ(3,"button",18),e.NdJ("click",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.uploadPhoto(i))}),e._uU(4,"Carica Foto"),e.qZA()()}}function y(t,l){1&t&&(e.TgZ(0,"p",19),e._uU(1,"Caricamento in corso..."),e.qZA())}function C(t,l){1&t&&(e.TgZ(0,"p",20),e._uU(1,"Caricamento completato"),e.qZA())}const _=[{path:"",component:m,children:[{path:"upload",canActivate:[u.a],component:(()=>{class t{constructor(n){this.galleryService=n,this.uploading=!1}ngOnInit(){this.galleryService.getGallery().subscribe({next:n=>{this.gallery=n}})}resetFile(){}onFileSelected(n){if(this.selectedFile=n.target.files[0],this.selectedFile){const o=new FileReader;o.onload=i=>{this.previewImageSrc=i.target.result},o.readAsDataURL(this.selectedFile)}}uploadPhoto(n){if(n.preventDefault(),this.selectedFile){this.uploading=!0;const o=new FormData;o.append("file",this.selectedFile,this.selectedFile.name),o.append("gallery",this.gallery.id.toString()),o.append("type",this.selectedFile.type),this.galleryService.postFile(o).subscribe({next:i=>{this.file=i,setTimeout(()=>{window.location.reload()},3e3)}})}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.j))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-upload"]],decls:12,vars:5,consts:[[1,"section","d-flex","align-items-center","justify-content-center","min-vh-100"],[1,"container"],[1,"row"],[1,"col","text-center","mx-auto"],[1,"m-2"],["class","mt-4",4,"ngIf"],["enctype","multipart/form-data"],["class","form-group",4,"ngIf"],["class","d-flex justify-content-center text-center m-2",4,"ngIf"],["class","mt-2",4,"ngIf"],["class","text-success mt-2",4,"ngIf"],[1,"mt-4"],[1,"media-container"],[1,"img-fluid","img-preview",3,"src"],[1,"form-group"],["type","file",1,"form-control",3,"change"],[1,"d-flex","justify-content-center","text-center","m-2"],[1,"btn","btn-danger","mx-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"mt-2"],[1,"text-success","mt-2"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Carica foto e video"),e.qZA(),e.YNc(6,g,3,1,"div",5),e.TgZ(7,"form",6),e.YNc(8,h,2,0,"div",7),e.YNc(9,v,5,0,"div",8),e.YNc(10,y,2,0,"p",9),e.YNc(11,C,2,0,"p",10),e.qZA()()()()()),2&n&&(e.xp6(6),e.Q6J("ngIf",o.selectedFile&&o.previewImageSrc),e.xp6(2),e.Q6J("ngIf",!o.selectedFile),e.xp6(1),e.Q6J("ngIf",o.selectedFile&&!o.uploading),e.xp6(1),e.Q6J("ngIf",o.uploading&&!o.file),e.xp6(1),e.Q6J("ngIf",o.file))},dependencies:[p.O5],styles:[".img-preview[_ngcontent-%COMP%]{max-height:70vh;max-width:90%}.btn-reset[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:1}"]}),t})()}]}];let F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.Bz.forChild(_),a.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,d.O,F]}),t})()}}]);